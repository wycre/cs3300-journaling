<!-- inherit from base.html-->
{% extends "base_template.html" %}


<!-- Replace block content in base_template.html -->
{% block content %}
<div>
    <div class="d-flex flex-row justify-content-between align-items-center mb-2">
        <h1 class="mb-0">My Journals</h1>
        <a href="/journal/new" class="btn btn-primary">New Journal</a>
    </div>
    <div id="journ-cards" class="container-fluid">

        {# This flexbox manages all the cards #}
        <div class="d-flex flex-row flex-wrap align-items-stretch">
            {% for i in journals %}

                {# This flexbox holds all card elements #}
                    <div class="card border-select-hover m-1" style="width: 20rem">

                        {# This div holds the header and author name #}
                        <div class="card-header">
                            <a class="mb-0 pb-0 text-emphasis unstyled-container-link card-cover-link" href="/journal?id={{ i.id }}">{{ i.title }}</a>
                            <p class="text-secondary m-0 p-0">By {{ i.author_name }}</p>
                        </div>

                        {# This div holds the card body elements #}
                        <div class="card-body d-flex justify-content-between flex-column align-self-end">
                            <div>
                                <p>{{ i.memo|linebreaksbr|truncatechars:100 }}</p> {# Truncated Memo #}
                            </div>

                            {# This div holds everything that appears on the bottom of the card #}
                            <div class="d-flex align-self-end flex-column">
                                {# Placeholder Element waiting for Post impl #}
                                <div class="container border rounded">
                                    <p class="m-0">TODO: Most recent post will go here</p>
                                </div>

                                {# This div holds the outlink buttons #}
                                <div class="d-flex container align-self-end mt-2 justify-content-around flex-row">
                                    <a href="/journal?id={{ i.id }}&edit=1" class="btn btn-secondary ms-2 flex-grow-1 position-relative" style="flex-basis: 0;">Edit</a>
                                    <a href="/journal/delete?id={{ i.id }}" class="btn btn-danger ms-2 flex-grow-1 position-relative" style="flex-basis: 0;">Delete</a>
                                </div>

                            </div>

                        </div>

                    </div>

            {% endfor %}
        </div>
    </div>
</div>


{% endblock %}